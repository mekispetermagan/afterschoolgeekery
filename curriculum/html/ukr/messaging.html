<!-- This file is meant to be loaded in "curriculum.html". -->
<div class="chapter">
  <h1 class="topicTitle"> Обмін повідомленнями у Scratch</h1>

  <div class="section">
    <div class="section-title"> Вступ </div>
    <div class="celltitle"> Про що цей посібник? </div>
    <div class="cell">
      <p>
        Цей посібник допоможе вам дізнатися, як використовувати надсилання та отримання повідомлень у Scratch. Це потужний інструмент, який дозволяє спрайтам проекту взаємодіяти у фоновому режимі, координуючи їхню поведінку. Посібник складається з однієї проектної роботи. Цей проект є діалогом між двома спрайтами. Ось результат:
      </p>
      <iframe src="https://scratch.mit.edu/projects/1003020173/embed" allowtransparency="true" width="485" height="402" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <p>
        Цей проект демонструє, як можна підтримувати взаємодію між спрайтами за допомогою трансляції повідомлень. Хоча проект простий, він дуже важливий, оскільки може бути використаний як основа для будь-якого проекту сторітелінгу.
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Як працюють повідомлення у Scratch? </div>
    <div class="cell">
      <p>
        Блоки повідомлень можна знайти в кінці групи Події:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/01.png" alt="figure"><br>
        Повідомлення зазвичай використовуються для координації поведінки спрайтів. Наприклад, у нас є спрайт "Хитрий койот", який у певний момент надсилає повідомлення "вибухнути!" з блоком "трансляція повідомлення". А ще у нас є спрайт "динаміт", який має блок події "при отриманні" з тим самим повідомленням "вибухнути!". Спрайт "динаміт" отримає повідомлення, надіслане Хитрим Койотом, і блоки під блоком подій будуть виконані. Так взаємодіють блоки "транслювати" та "отримувати". (Третій блок, "транслювати і чекати", з нашого досвіду, трохи заплутує дітей, тому ми зазвичай уникаємо його використання).
      </p>
      <p>
        Ви можете встановити текст повідомлення, натиснувши на білий трикутник, спрямований вниз, на блоці "транслювати" або "отримувати", і натиснувши на "нове повідомлення": <br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/02.png" alt="figure"><br>
        Текст повідомлення не має особливого значення; важливо, щоб у блоці "передавач" і "приймач" було однакове повідомлення. Однак, бажано використовувати змістовний текст; "повідомлення1", "повідомлення2", "повідомлення3" і т.д. призведуть до хаосу, коли у вас є десятки повідомлень у проекті.
      </p>
      <p>
        Дітей часто збиває з пантелику очевидна схожість між блоками повідомлень і блоками "скажи" групи "Погляди":<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/03.png" alt="figure"><br>
        Однак між блоками "скажи" і блоками повідомлень немає нічого спільного, окрім того, що обидва використовують тексти. Блок "say" просто змінює спосіб відображення спрайта, накладаючи на нього мовну бульбашку; він призначений для аудиторії, користувача проекту, а не для інших спрайтів. Трансляція повідомлення, у свою чергу, призначена для інших спрайтів, а не для аудиторії; користувач проекту навіть не помітить, що повідомлення було надіслано в межах проекту, а лише його наслідки. Більш детально про те, як навчити дітей розрізняти ці поняття, ми розповімо в посібнику "Гейміфікація".
      </p>
    </div> <!-- section -->

  </div> <!-- section -->

  <div class="section">
    <div class="section-title" id="dialogue"> Робота над проектом: діалог між двома спрайтами </div>

    <div class="celltitle">Підготовка</div>
    <div class="cell">
      <p>
        Створіть новий проект і додайте два ваших улюблених спрайти, які будуть вести розмову. За бажанням, ви також можете додати тло.<br>
        <img class="figure" width="60%" src="curriculum/img/ukr/messaging/04.png" alt="figure">
        Ми будемо називати спрайти проекту "Giga" і "Nano"; звичайно, ви можете назвати свої спрайти так, як вам подобається.
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Гіга починає розмову</div>
    <div class="cell">
      <p>
        Давайте почнемо проект з того, що Гіга вийде на сцену. Ми зробимо це за допомогою блоків "go to" і "glide", як ви дізналися з посібника "Рух". Розмістіть Giga біля лівого краю і виберіть блок "go to" з її поточними значеннями x та y:<br>
        <img class="figure" width="60%" src="curriculum/img/ukr/messaging/05.png" alt="figure"><br>
        <img class="figure" width="25%" src="curriculum/img/ukr/messaging/06.png" alt="figure"><br>
        Тепер поверніть її назад у центр і виберіть блок "ковзання" з новими значеннями x та y:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/07.png" alt="figure"><br>
        Прибувши на місце, нехай Гіга привітає свого друга:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/08.png" alt="figure"><br>
        Запустіть проект, щоб перевірити, чи все йде за планом.
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Нано приєднується до розмови</div>
    <div class="cell">
      <p>
        Тепер переключіться на Нано, щоб скласти для нього код. Можливо, ви захочете почати з блоку "say" (і блоку "go to" для встановлення початкової позиції спрайта):<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/09.png" alt="figure"><br>
        Коли ви перезапустите проект, ви побачите, що це не працює; Nano починає говорити ще до того, як з'являється Giga. Першою ідеєю може бути затримка відповіді Nano за допомогою блоку wait. Giga витрачає 1 секунду на ковзання і 2 секунди на розмову, тому затримка становитиме 3 секунди:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/10.png" alt="figure"><br>
        Очевидно, це працює: відповідь починається вчасно.
      </p>
      <p>
        Давайте додамо трохи руху, щоб зробити розмову цікавішою, використовуючи прийоми, про які ви дізналися з посібника "Рух". Знову ж таки, розмістіть спрайт перед тим, як вибрати блок "йти до" або "ковзати", так, щоб координати були встановлені:<br>
        <img class="figure" width="60%" src="curriculum/img/ukr/messaging/11.png" alt="figure"><br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/12.png" alt="figure">
      </p>
      <p>
        Поки що все йде добре; все відбувається так, як треба, і тоді, коли треба. Однак код стає довгим. Нелегко орієнтуватися у скрипті з великою кількістю блоків. Як ми побачимо, це не єдина проблема.
      </p>
      <p>
        Щоб Giga вчасно відреагував на трюк Nano, нам потрібен ще один блок очікування. Але скільки секунд в нього закласти? 12 повторень займають близько півсекунди; 2 + 2 + 0.3 + 0.5 + 0.3 = 5.1 (не забувайте, що Скретч використовує десяткові крапки замість десяткових ком), отже, Giga має чекати близько 5 секунд:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/13.png" alt="figure">
      </p>
      <p>
        Якщо ви перезапустите проект, то побачите, що все знову працює. Але робити такі складні обчислення для простої анімації несправедливо; має бути спосіб уникнути обчислення часу затримки. Подумайте про це: що, якщо пізніше ви передумаєте і додасте ще одне речення або зміните рух? Вам доведеться перераховувати час щоразу, коли ви змінюєте деталь. Це серйозна проблема дизайну; код у такому вигляді важко писати і важко підтримувати.
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Таймінг за допомогою повідомлень</div>
    <div class="cell">
      <p>
        Замість того, щоб жорстко кодувати затримки, давайте синхронізувати розмову за допомогою повідомлень. Коли Giga закінчить своє привітання, вона може натиснути на Nano з повідомленням:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/14.png" alt="figure"><br>
        Nano може почати свою частину, коли отримає це повідомлення, і тицьнути Giga назад, коли він закінчить свій трюк:<br>
        <img class="figure" width="40%" src="curriculum/img/ukr/messaging/15.png" alt="figure"><br>
        Тепер знову черга Giga:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/16.png" alt="figure">
      </p>
      <p>
        Якщо ви перезапустите проект, то побачите, що історія не змінилася. Змінився лише дизайн вашого проекту. Тепер код розбитий на невеликі скрипти, кожен з яких описує одну частину розмови. А блоки "зачекайте" зникли разом із складною математикою.
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Продовження розмови</div>
    <div class="cell">
      <p>
        Давайте додамо в історію ще один трюк, цього разу невдалий для Гіги. Поміняйте числа у блоках "поворот" і "повтор" так, щоб перевертання було повільним і неповним:<br>
        <img class="figure" width="40%" src="curriculum/img/ukr/messaging/17.png" alt="figure"><br>
        Добре було б додати блок "вказати напрямок" на початку коду Giga, щоб вона стояла щоразу, коли ви перезапускаєте проект. Зробіть те ж саме з Nano.<br>
        <img class="figure" width="25%" src="curriculum/img/ukr/messaging/18.png" alt="figure"><br>
        <img class="figure" width="25%" src="curriculum/img/ukr/messaging/19.png" alt="figure">
      </p>
      <p>
        Тепер знову настала черга Нано реагувати, тож нехай Гіга тицьне йому ще одне повідомлення. Переконайтеся, що воно відрізняється від попереднього, інакше історія зациклиться:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/20.png" alt="figure">
      </p>
      <p>
        Ви бачите, як цей обмін повідомленнями контролює хід розмови? Все на своїх місцях, і ваш код розбитий на красиві та змістовні одиниці. Ви можете продовжувати розповідь так довго, як забажаєте:<br>
        <img class="figure" width="35%" src="curriculum/img/ukr/messaging/21.png" alt="figure"><br>
        <img class="figure" width="40%" src="curriculum/img/ukr/messaging/22.png" alt="figure">
      </p>
    </div> <!-- cell -->

  </div> <!-- section -->

  <div class="section">
    <div class="section-title" id="dialogue"> Виклики </div>

    <div class="celltitle">Виклик 1</div>
    <div class="cell">
      <p>
        Продовжіть розмову ще двома повідомленнями: "Nano3!" та "Giga3!"<br>
        <img class="figure" width="60%" src="curriculum/img/ukr/messaging/23.png" alt="figure">
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Виклик 2</div>
    <div class="cell">
      <p>
        Додайте до розмови спрайт заголовка. При натисканні на зелений прапорець ми бачимо заголовок протягом 2 секунд, потім він зникає, а історія починається з повідомлення "Починай!"<br>
        <img class="figure" width="60%" src="curriculum/img/ukr/messaging/24.png" alt="figure">
      </p>
    </div> <!-- cell -->

    <div class="celltitle">Виклик 3</div>
    <div class="cell">
      <p>
        Створіть ще одну коротку розмову, цього разу між трьома спрайтами. Зверніть увагу, що тепер обмін повідомленнями не буде простим "туди-сюди"; повідомлення можуть отримувати два спрайти, тому обидва можуть реагувати одночасно.<br>
        <img class="figure" width="60%" src="curriculum/img/ukr/messaging/25.png" alt="figure">
      </p>
    </div> <!-- cell -->

  </div> <!-- section -->

</div> <!-- chapter -->
